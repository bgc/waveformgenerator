(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["scw-harmonic-generator-additive"],{"18be":function(t,e,n){"use strict";var i=n("bb3f"),a=n.n(i);a.a},3466:function(t,e,n){"use strict";n.d(e,"a",function(){return l}),n.d(e,"b",function(){return c});var i=n("e814"),a=n.n(i);const s=[435,440],r=440,o=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"],l=function(t,e){if(t>=128)return 0;let n,i,a;return-1===s.indexOf(e)&&(e=r),i=Math.pow(2,1/12),a=e/2*Math.pow(i,3),n=a*Math.pow(.5,5),n*Math.pow(i,t)},c=function(t){let e=a()(t,10)%12;return o[e]}},"747b":function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{"align-center":"","justify-center":"",column:""}},[n("v-flex",{attrs:{xs12:"","align-center":""}},[n("v-layout",{attrs:{"align-center":"","justify-center":"",row:""}},[n("v-text-field",{staticClass:"mx-3",attrs:{xs1:"",label:"Selected Note",disabled:""},model:{value:t.noteName,callback:function(e){t.noteName=e},expression:"noteName"}}),n("v-spacer"),n("v-text-field",{staticClass:"mx-3",attrs:{xs3:"",label:"Octave",type:"number",min:"0",max:"9"},model:{value:t.octave,callback:function(e){t.octave=e},expression:"octave"}}),n("v-spacer"),n("v-text-field",{staticClass:"mx-3",attrs:{xs1:"",label:"Freq (Hz)",disabled:""},model:{value:t.freqHertz,callback:function(e){t.freqHertz=e},expression:"freqHertz"}})],1)],1),n("v-flex",{attrs:{xs12:"","align-center":""}},[n("div",{attrs:{id:"myPiano"}})])],1)},a=[],s=n("ea48"),r=n("ddd0"),o=n("3466"),l=n("87af");const c=["a","w","s","e","d","f","t","g","y","h","u","j"];var u={name:"PianoOctave",props:{initWidth:{type:Number,default:function(){return 960}},initHeight:{type:Number,default:function(){return 130}},initLowNote:{type:Number,default:function(){return 0}},initHighNote:{type:Number,default:function(){return 11}},initOctave:{type:Number,default:function(){return 3}}},data:function(){return{width:this.initWidth,height:this.initHeight,lowNote:this.initLowNote,highNote:this.initHighNote,ui:null,pnote:null,octave:this.initOctave}},computed:{noteName:function(){return null===this.pnote?"---":Object(o["b"])(this.pnote)},freqHertz:function(){return null===this.pnote?"---":Object(o["a"])(this.pnote+12*this.octave).toFixed(3)},finalNote:function(){return null===this.pnote?null:this.pnote+12*this.octave}},watch:{finalNote:function(){s["a"].$emit("update:Piano:Note",this.finalNote)}},mounted(){this.ui=new r["Piano"]("#myPiano",{mode:"button",lowNote:this.lowNote,highNote:this.highNote}),this.ui.colorize("accent",l["a"].accent),this.ui.colorize("fill",l["a"].fill),this.ui.on("change",t=>{const e=t.note,n=t.state;!1!==n&&(this.pnote=e)}),window.addEventListener("keypress",this.handleKeyPress.bind(this))},beforeDestroy(){this.ui&&this.ui.destroy(),window.removeEventListener("keypress",this.handleKeyPress)},methods:{handleKeyPress:function(t){const e=t.key.toLowerCase(),n=c.indexOf(e);n<0||n>=12||(this.ui.toggleKey(this.lowNote+n,!0),this.ui.toggleKey(this.lowNote+n,!1))}}},h=u,d=n("2877"),m=n("6544"),f=n.n(m),p=n("0e8f"),v=n("a722"),b=n("9910"),g=n("8654"),w=(n("7e63"),n("d9bd")),y=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},x={name:"v-textarea",extends:g["a"],props:{autoGrow:Boolean,noResize:Boolean,outline:Boolean,rowHeight:{type:[Number,String],default:24,validator:function(t){return!isNaN(parseFloat(t))}},rows:{type:[Number,String],default:5,validator:function(t){return!isNaN(parseInt(t,10))}}},computed:{classes:function(){return y({"v-textarea":!0,"v-textarea--auto-grow":this.autoGrow,"v-textarea--no-resize":this.noResizeHandle},g["a"].options.computed.classes.call(this,null))},dynamicHeight:function(){return this.autoGrow?this.inputHeight:"auto"},isEnclosed:function(){return this.textarea||g["a"].options.computed.isEnclosed.call(this)},noResizeHandle:function(){return this.noResize||this.autoGrow}},watch:{lazyValue:function(){!this.internalChange&&this.autoGrow&&this.$nextTick(this.calculateInputHeight)}},mounted:function(){var t=this;setTimeout(function(){t.autoGrow&&t.calculateInputHeight()},0),this.autoGrow&&this.noResize&&Object(w["b"])('"no-resize" is now implied when using "auto-grow", and can be removed',this)},methods:{calculateInputHeight:function(){var t=this.$refs.input;if(t){t.style.height=0;var e=t.scrollHeight,n=parseInt(this.rows,10)*parseFloat(this.rowHeight);t.style.height=Math.max(n,e)+"px"}},genInput:function(){var t=g["a"].options.methods.genInput.call(this);return t.tag="textarea",delete t.data.attrs.type,t.data.attrs.rows=this.rows,t},onInput:function(t){g["a"].options.methods.onInput.call(this,t),this.autoGrow&&this.calculateInputHeight()},onKeyDown:function(t){this.isFocused&&13===t.keyCode&&t.stopPropagation(),this.internalChange=!0,this.$emit("keydown",t)}}},H=n("7cf7"),S=n("ab6d"),O={functional:!0,$_wrapperFor:g["a"],props:{textarea:Boolean,multiLine:Boolean},render:function(t,e){var n=e.props,i=e.data,a=e.slots,s=e.parent;Object(S["a"])(i);var r=Object(H["a"])(a(),t);return n.textarea&&Object(w["d"])("<v-text-field textarea>","<v-textarea outline>",O,s),n.multiLine&&Object(w["d"])("<v-text-field multi-line>","<v-textarea>",O,s),n.textarea||n.multiLine?(i.attrs.outline=n.textarea,t(x,i,r)):t(g["a"],i,r)}},N=Object(d["a"])(h,i,a,!1,null,null,null);e["a"]=N.exports;f()(N,{VFlex:p["a"],VLayout:v["a"],VSpacer:b["a"],VTextField:O})},"7e63":function(t,e,n){},"87af":function(t,e,n){"use strict";n.d(e,"a",function(){return i});const i={accent:"#b3b3b3",fill:"#181E34"}},9870:function(t,e,n){"use strict";var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-layout",{attrs:{"align-center":"","justify-center":"",row:""}},[n("v-flex",{attrs:{xs12:"","align-center":""}},[n("div",{staticClass:"extra-bottom-margin",attrs:{id:"mySlider"}}),n("v-btn",{on:{click:t.resetValues}},[t._v("\n      Reset Harmonics\n    ")])],1)],1)},a=[],s=(n("ac6a"),n("ea48")),r=n("ddd0"),o={name:"HarmonicsMultiSlider",props:{nrSliders:{type:Number,default:function(){return 1}}},data:function(){const t=new Array(this.nrSliders).fill(0);return{min:0,max:1,step:.01,ui:null,harmonics:t,numberOfSliders:this.nrSliders}},watch:{nrSliders:function(t){this.numberOfSliders=t,this.updatedSliderAmmount()}},mounted(){const t=new Array(this.nrSliders).fill(0),e=document.getElementById("mySlider"),n=e.parentElement.offsetWidth;this.ui=new r["Multislider"]("#mySlider",{size:[n,300],step:this.step,min:this.min,candycane:16,mode:"bar",numberOfSliders:this.numberOfSliders,max:this.max,smoothing:0,values:t}),this.ui.on("change",t=>{const e=t;this.harmonics=e,s["a"].$emit("update:HarmonicsMultiSlider:Harmonics",this.harmonics)})},beforeDestroy(){this.ui&&this.ui.destroy()},methods:{resetValues:function(){if(!this.ui)return;const t=this.ui.numberOfSliders,e=new Array(t).fill(0);this.ui.setAllSliders(e),this.harmonics=e,s["a"].$emit("update:HarmonicsMultiSlider:Harmonics",this.harmonics)},updatedSliderAmmount:function(){if(this.ui){this.ui.destroy();const t=document.getElementById("mySlider"),e=t.parentElement.offsetWidth;let n;this.harmonics.length>=this.numberOfSliders?n=this.harmonics.slice(0,this.numberOfSliders-1):(n=new Array(this.nrSliders).fill(0),this.harmonics.forEach((t,e)=>{n[e]=t})),this.harmonics=n.slice(0),this.ui=new r["Multislider"]("#mySlider",{size:[e,300],step:this.step,min:this.min,candycane:this.numberOfSliders<16?this.numberOfSliders:16,mode:"bar",numberOfSliders:this.numberOfSliders,max:this.max,smoothing:0,values:n}),s["a"].$emit("update:HarmonicsMultiSlider:Harmonics",this.harmonics),this.ui.on("change",t=>{const e=t;this.harmonics=e,s["a"].$emit("update:HarmonicsMultiSlider:Harmonics",this.harmonics)})}}}},l=o,c=(n("18be"),n("2877")),u=n("6544"),h=n.n(u),d=n("8336"),m=n("0e8f"),f=n("a722"),p=Object(c["a"])(l,i,a,!1,null,null,null);e["a"]=p.exports;h()(p,{VBtn:d["a"],VFlex:m["a"],VLayout:f["a"]})},bb3f:function(t,e,n){},dfac:function(t,e,n){"use strict";n.r(e);var i=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("v-sheet",{attrs:{elevation:"5"}},[n("toolbar",{attrs:{"m-data":t.generatedWaveForm,title:"Harmonic Additive"}}),n("v-sheet",{staticClass:"pa-3",attrs:{elevation:"10","min-height":"255"}},[t.dataset?n("waveform",{attrs:{"m-dataset":t.dataset}}):t._e()],1),n("v-sheet",{staticClass:"pa-3",attrs:{elevation:"10"}},[n("pianooctave",{staticClass:"mt-2"}),n("harmonicsmultislider",{staticClass:"mt-2",attrs:{"nr-sliders":t.numHarmonics}}),n("v-select",{attrs:{value:t.numHarmonics,items:t.availableharmonics,solo:"",prefix:"Harmonics: ",placeholder:"Harmonics",label:"Harmonics"},on:{change:t.changeHarmonics}})],1)],1)},a=[],s=(n("ac6a"),n("ea48")),r=n("747b"),o=n("e330"),l=n("ffe8"),c=n("9870"),u=n("7bac"),h=n("3466"),d=n("242d"),m=n("e1c1"),f=n("bf7e"),p={name:"ScwGeneratorHarmonicAdditive",components:{pianooctave:r["a"],waveform:o["a"],harmonicsmultislider:c["a"],toolbar:l["a"]},data:()=>({note:null,generatedWaveForm:null,dataset:null,numHarmonics:64,harmonics:[0],availableharmonics:[8,16,32,64],srate:f["a"].getSampleRate()}),computed:{},watch:{note:function(t,e){const n=Object(h["a"])(t);this.generateData(n)},srate:function(t,e){const n=Object(h["a"])(this.note);this.generateData(n)}},created(){s["a"].$on("update:Piano:Note",t=>{this.note=t}),s["a"].$on("update:HarmonicsMultiSlider:Harmonics",t=>{this.harmonics=new Array(this.numHarmonics).fill(0),t.forEach((t,e)=>{this.harmonics[e]=t});const e=Object(h["a"])(this.note);this.generateData(e)}),s["a"].$on("update:Samplerate",t=>{this.srate=t})},mounted(){},beforeDestroy(){this.note=null,this.generatedWaveForm=null,this.dataset=null},methods:{waveformGenerator:m["a"].harmonicsBased.additive,generateData:function(t){if(this.cantGenerate())return;const e=this.getAllowedHarmonics(t),n=Array.apply(null,{length:e.length}).map((t,e)=>{return e+1});this.generatedWaveForm=this.waveformGenerator(t,n,e,this.srate);const i=Object(u["a"])(this.generatedWaveForm,this.srate);this.dataset=i},getAllowedHarmonics:function(t){const e=Object(d["b"])(t,this.srate);return this.numHarmonics>=e?this.harmonics.slice(0,e-1):this.harmonics},cantGenerate:function(){return null===this.numHarmonics||null===this.note},changeHarmonics:function(t){this.numHarmonics=t}}},v=p,b=n("2877"),g=n("6544"),w=n.n(g),y=n("b56d"),x=n("8dd9"),H=Object(b["a"])(v,i,a,!1,null,null,null);e["default"]=H.exports;w()(H,{VSelect:y["a"],VSheet:x["a"]})}}]);